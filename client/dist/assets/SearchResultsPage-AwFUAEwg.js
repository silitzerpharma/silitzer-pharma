import{h as x,r,i as j,x as f,j as e,n as g}from"./index-DlcvTWOH.js";const S="https://silitzer-pharma.onrender.com",N=()=>{const d=x(),[c,a]=r.useState([]),[h,n]=r.useState(!0),u=j(),t=new URLSearchParams(f().search).get("query");r.useEffect(()=>{const s=async()=>{try{const l=await(await fetch(`${S}/distributor/searchProducts`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({query:t})})).json();Array.isArray(l)?a(l):a([])}catch(i){console.error("Error fetching search results:",i),a([])}finally{n(!1)}};t&&t.trim()!==""?s():(n(!1),a([]))},[t]);const m=s=>{if(!s.inStock)return;const i={...s,quantity:1,image:s.imageUrl};d(g(i))},o=s=>{u(`/distributor/product/${s}`)};return e.jsx("div",{className:"search-results-page",children:h?e.jsx("p",{children:"Loading..."}):c.length===0?e.jsx("p",{children:"No products found."}):e.jsxs("div",{className:"search-div",children:[e.jsx("h2",{children:"Search Results"}),e.jsx("ul",{className:"search-product-card-list",children:c.map(s=>e.jsxs("li",{className:"search-product-card",children:[e.jsx("div",{className:"img",onClick:()=>o(s._id),children:e.jsx("img",{src:s.imageUrl||"/images/default-product.jpg",alt:s.productName})}),e.jsxs("div",{className:"details",children:[e.jsx("div",{className:"title",onClick:()=>o(s._id),children:s.productName}),s.unitsPerBox>0&&e.jsxs("p",{className:"units-info",children:["Units per Box: ",s.unitsPerBox]}),e.jsx("div",{className:`stock-status ${s.inStock?"in-stock":"out-of-stock"}`,children:s.inStock?"In Stock":"Out of Stock"})]}),e.jsx("div",{className:"card-btn",children:e.jsx("button",{onClick:()=>m(s),disabled:!s.inStock,children:"Add to Cart"})})]},s._id))})]})})};export{N as default};
