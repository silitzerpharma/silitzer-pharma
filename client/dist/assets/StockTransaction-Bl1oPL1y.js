import{r,j as e,L as M,P as C}from"./index-DlcvTWOH.js";import{T}from"./TableContainer-CQmYnS7h.js";import{T as v,a as w,b as i,c as s,d as N}from"./TableRow-DuThesGT.js";import{T as b}from"./TablePagination-C03NsVHS.js";import"./LastPage-DpFt_x2b.js";import"./IconButton-eRt6TsSc.js";import"./Select-BpVlYiRl.js";import"./useControlled-CHhDBfC_.js";import"./useFormControl-CXPDb4oN.js";const k="https://silitzer-pharma.onrender.com",V=()=>{const y=new Date().toISOString().split("T")[0],[o,D]=r.useState(y),[c,R]=r.useState(""),[m,O]=r.useState([]),[S,g]=r.useState(0),[d,I]=r.useState(10),[L,_]=r.useState(0),[P,q]=r.useState([]),[f,p]=r.useState(0),[h,E]=r.useState(10),[$,A]=r.useState(0),[B,x]=r.useState(!1),U=t=>D(t.target.value),Q=t=>R(t.target.value),z=()=>{g(0),p(0),j(0,d),u(0,h)},H=(t,n)=>{g(n),j(n,d)},F=t=>{const n=parseInt(t.target.value,10);I(n),g(0),j(0,n)},G=(t,n)=>{p(n),u(n,h)},J=t=>{const n=parseInt(t.target.value,10);E(n),p(0),u(0,n)},j=async(t=S,n=d)=>{try{x(!0);const a=new URLSearchParams;o&&a.append("date",o),c&&a.append("query",c),a.append("page",t+1),a.append("limit",n);const l=await(await fetch(`${k}/admin/stocktransaction/instock?${a.toString()}`,{credentials:"include"})).json();O(l.data||[]),_(l.totalCount||0)}catch(a){console.error("In-stock fetch error:",a)}finally{x(!1)}},u=async(t=f,n=h)=>{try{x(!0);const a=new URLSearchParams;o&&a.append("date",o),c&&a.append("query",c),a.append("page",t+1),a.append("limit",n);const l=await(await fetch(`${k}/admin/stocktransaction/outstock?${a.toString()}`,{credentials:"include"})).json();q(l.data||[]),A(l.totalCount||0)}catch(a){console.error("Out-stock fetch error:",a)}finally{x(!1)}};return r.useEffect(()=>{j(),u()},[]),B?e.jsx(M,{message:"Loading StockTransactions..."}):e.jsxs("div",{className:"StockTransactionTable",children:[e.jsxs("div",{className:"stock-table-search",children:[e.jsx("span",{children:"Search Stock-Transaction By-"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"}),e.jsx("input",{type:"date",value:o,onChange:U})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Product:"}),e.jsx("input",{type:"text",value:c,onChange:Q,placeholder:"name, code"})]}),e.jsx("button",{onClick:z,children:"Search"})]}),e.jsx("div",{className:"stock-div",children:e.jsxs(T,{component:C,sx:{mt:3},children:[e.jsxs("div",{className:"date-header",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Date:"})," ",o||"all"]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Product:"})," ",c||"all"]})]}),e.jsx("div",{className:"stock-table-title",children:"In-Stock"}),e.jsxs(v,{children:[e.jsx(w,{children:e.jsxs(i,{children:[e.jsx(s,{children:e.jsx("strong",{children:"Product Name"})}),e.jsx(s,{children:e.jsx("strong",{children:"Quantity Change"})}),e.jsx(s,{children:e.jsx("strong",{children:"Reason"})}),e.jsx(s,{children:e.jsx("strong",{children:"Order Number"})}),e.jsx(s,{children:e.jsx("strong",{children:"Date"})})]})}),e.jsxs(N,{children:[m.map(t=>e.jsxs(i,{children:[e.jsx(s,{children:t.productName}),e.jsx(s,{children:t.quantityChange}),e.jsx(s,{children:t.reason}),e.jsx(s,{children:t.orderNumber||"N/A"}),e.jsx(s,{children:new Date(t.timestamp).toLocaleString()})]},t._id)),m.length===0&&e.jsx(i,{children:e.jsx(s,{colSpan:5,align:"center",children:"No records found"})})]})]}),e.jsx(b,{component:"div",count:L,page:S,onPageChange:H,rowsPerPage:d,onRowsPerPageChange:F,rowsPerPageOptions:[5,10,25]})]})}),e.jsx("div",{className:"stock-div",children:e.jsxs(T,{component:C,sx:{mt:3},children:[e.jsx("div",{className:"stock-table-title",children:"Out-Stock"}),e.jsxs(v,{children:[e.jsx(w,{children:e.jsxs(i,{children:[e.jsx(s,{children:e.jsx("strong",{children:"Product Name"})}),e.jsx(s,{children:e.jsx("strong",{children:"Quantity Change"})}),e.jsx(s,{children:e.jsx("strong",{children:"Reason"})}),e.jsx(s,{children:e.jsx("strong",{children:"Order Number"})}),e.jsx(s,{children:e.jsx("strong",{children:"Date"})})]})}),e.jsxs(N,{children:[P.map(t=>e.jsxs(i,{children:[e.jsx(s,{children:t.productName}),e.jsx(s,{children:t.quantityChange}),e.jsx(s,{children:t.reason}),e.jsx(s,{children:t.orderNumber||"N/A"}),e.jsx(s,{children:new Date(t.timestamp).toLocaleString()})]},t._id)),P.length===0&&e.jsx(i,{children:e.jsx(s,{colSpan:5,align:"center",children:"No records found"})})]})]}),e.jsx(b,{component:"div",count:$,page:f,onPageChange:G,rowsPerPage:h,onRowsPerPageChange:J,rowsPerPageOptions:[5,10,25]})]})})]})},oe=()=>e.jsxs("div",{className:"StockTransaction",children:[e.jsx("div",{className:"StockTransaction-nav",children:e.jsx("span",{className:"title",children:"Stock Transaction"})}),e.jsx(V,{})]});export{oe as default};
