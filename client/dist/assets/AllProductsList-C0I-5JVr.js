import{r as a,h as $,i as R,j as t,P as O,B as E,n as D}from"./index-DlcvTWOH.js";import{T as _}from"./TableContainer-CQmYnS7h.js";import{T as z,a as F,b as c,c as r,d as H}from"./TableRow-DuThesGT.js";import{T as I}from"./TableSortLabel-Csm9lG0A.js";import{T as U}from"./TablePagination-C03NsVHS.js";import{S as q}from"./Snackbar-z76ToobN.js";import{A as G}from"./Alert-D_RgXu2Q.js";import"./LastPage-DpFt_x2b.js";import"./IconButton-eRt6TsSc.js";import"./Select-BpVlYiRl.js";import"./useControlled-CHhDBfC_.js";import"./useFormControl-CXPDb4oN.js";const W="https://silitzer-pharma.onrender.com",oe=()=>{const[u,m]=a.useState([]),[x,h]=a.useState(0),[n,f]=a.useState("asc"),[o,j]=a.useState("productName"),[i,l]=a.useState(0),[d,S]=a.useState(10),[P,p]=a.useState(!1),[k,g]=a.useState(!1),T=$(),w=R(),C=e=>{w(`/distributor/product/${e}`)},v=async()=>{p(!0);try{const s=await(await fetch(`${W}/distributor/get-all-product-list?page=${i}&limit=${d}&orderBy=${o}&order=${n}`,{method:"GET",credentials:"include"})).json();m(s.items||[]),h(s.total||0)}catch(e){console.error("Failed to fetch products:",e),m([]),h(0)}p(!1)};a.useEffect(()=>{v()},[i,d,n,o]);const N=e=>{f(o===e&&n==="asc"?"desc":"asc"),j(e),l(0)},y=(e,s)=>l(s),A=e=>{S(parseInt(e.target.value,10)),l(0)},B=e=>{T(D({...e,offers:e.offers,image:e.imageUrl})),g(!0)},b=(e,s)=>{s!=="clickaway"&&g(!1)},L=[{id:"productName",label:"Product Name"},{id:"stock",label:"Stock"},{id:"actions",label:"Actions"}];return t.jsxs("div",{className:"allproductslist-con",children:[t.jsx("div",{className:"title",children:"All Products List"}),t.jsx("div",{className:"products-table",children:t.jsxs(_,{component:O,className:"table-container",children:[t.jsxs(z,{"aria-label":"products table",children:[t.jsx(F,{children:t.jsx(c,{children:L.map(e=>t.jsx(r,{align:"center",sortDirection:o===e.id?n:!1,children:e.id!=="actions"?t.jsx(I,{active:o===e.id,direction:o===e.id?n:"asc",onClick:()=>N(e.id),children:e.label}):e.label},e.id))})}),t.jsx(H,{children:P?t.jsx(c,{children:t.jsx(r,{colSpan:3,align:"center",children:"Loading..."})}):u.length===0?t.jsx(c,{children:t.jsx(r,{colSpan:3,align:"center",children:"No products found."})}):u.map((e,s)=>t.jsxs(c,{children:[t.jsx(r,{align:"center",style:{cursor:"pointer",color:"#1976d2",textDecoration:"underline"},onClick:()=>C(e._id),children:e.productName}),t.jsx(r,{align:"center",style:{color:e.inStock?"green":"red",fontWeight:"bold"},children:e.inStock?"In Stock":"Out of Stock"}),t.jsx(r,{align:"center",children:t.jsx(E,{variant:"contained",color:"primary",size:"small",onClick:()=>B(e),disabled:!e.inStock,children:"Add to Cart"})})]},`${e.productName}-${s}`))})]}),t.jsx(U,{component:"div",count:x,page:i,onPageChange:y,rowsPerPage:d,onRowsPerPageChange:A,rowsPerPageOptions:[5,10,25,50],showFirstButton:!0,showLastButton:!0})]})}),t.jsx(q,{open:k,autoHideDuration:3e3,onClose:b,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:t.jsx(G,{onClose:b,severity:"success",sx:{width:"100%"},children:"Product added to cart!"})})]})};export{oe as default};
