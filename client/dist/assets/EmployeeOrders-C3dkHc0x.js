import{r as t,j as e}from"./index-DlcvTWOH.js";const C="https://silitzer-pharma.onrender.com",L=()=>{const[h,p]=t.useState([]),[x,f]=t.useState(null),[n,S]=t.useState(""),[l,N]=t.useState("All"),[i,P]=t.useState(""),[d,j]=t.useState(1),[v,y]=t.useState(1),[c,g]=t.useState(!1),o=t.useRef(),b=t.useCallback(s=>{c||(o.current&&o.current.disconnect(),o.current=new IntersectionObserver(r=>{r[0].isIntersecting&&d<v&&j(a=>a+1)}),s&&o.current.observe(s))},[c,d,v]),m=t.useCallback(async()=>{g(!0);const s=new URLSearchParams;n.trim()&&s.append("search",n.trim()),l!=="All"&&s.append("status",l),i&&s.append("date",i),s.append("page",d),s.append("limit",5);try{const a=await(await fetch(`${C}/employee/orders?${s.toString()}`,{method:"GET",credentials:"include"})).json();p(d===1?a.data:u=>[...u,...a.data]),y(a.totalPages)}catch(r){console.error("Error fetching orders:",r)}g(!1)},[n,l,i,d]);t.useEffect(()=>{j(1)},[n,l,i]),t.useEffect(()=>{m()},[m]);const D=s=>{f(r=>r===s?null:s)};return e.jsxs("div",{className:"employee-orders",children:[e.jsxs("div",{className:"employee-orders-top",children:[e.jsx("div",{className:"employee-orders-title",children:"Order List"}),e.jsxs("div",{className:"employee-order-table-search",children:[e.jsxs("div",{className:"filter-orders",children:[e.jsx("label",{children:"View Orders: "}),e.jsxs("select",{value:l,onChange:s=>N(s.target.value),children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Approved",children:"Approved"}),e.jsx("option",{value:"Processing",children:"Processing"}),e.jsx("option",{value:"Shipped",children:"Shipped"}),e.jsx("option",{value:"Delivered",children:"Delivered"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"}),e.jsx("option",{value:"Hold",children:"Hold"})]}),e.jsx("input",{type:"date",value:i,onChange:s=>P(s.target.value)})]}),e.jsx("input",{className:"employee-order-search",type:"text",placeholder:"Search by Distributor, Order ID, Product...",value:n,onChange:s=>S(s.target.value)})]})]}),h.length===0&&!c?e.jsx("div",{className:"no-orders",children:"No orders found."}):h.map((s,r)=>{const a=r===h.length-1;return e.jsxs("div",{ref:a?b:null,className:"order-card",children:[e.jsxs("div",{className:"order-info",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Order ID:"})," ",s.orderNumber]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Distributor:"})," ",s.distributor]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Order Date:"})," ",new Date(s.orderDate).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",s.status]}),e.jsx("button",{onClick:()=>D(r),children:x===r?"Hide Products":"View Products"})]}),x===r&&e.jsxs("div",{className:"product-list",children:[e.jsx("h4",{children:"Products:"}),e.jsx("ul",{children:s.productList.map((u,O)=>e.jsxs("li",{children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Name:"})," ",u.productName]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Quantity:"})," ",u.quantity]})]},O))})]})]},r)}),c&&e.jsx("div",{className:"loading",children:"Loading..."})]})};export{L as default};
