import{r as t,E as m,j as e,L as _,P as U}from"./index-DlcvTWOH.js";/* empty css              */import k from"./ApproveOrder-BymRhDKC.js";import{T as B}from"./TableContainer-CQmYnS7h.js";import{T as I,a as A,b as x,c as a,d as F}from"./TableRow-DuThesGT.js";import{T as Q}from"./TablePagination-C03NsVHS.js";import"./DialogTitle-DGL2koDV.js";import"./LastPage-DpFt_x2b.js";import"./IconButton-eRt6TsSc.js";import"./Select-BpVlYiRl.js";import"./useControlled-CHhDBfC_.js";import"./useFormControl-CXPDb4oN.js";const V=()=>{const[j,b]=t.useState([]),[f,P]=t.useState(0),[o,l]=t.useState(0),[i,S]=t.useState(10),[O,d]=t.useState(null),[w,c]=t.useState(!1),[C,p]=t.useState(!1),[s,v]=t.useState(""),[n,T]=t.useState(""),y="https://silitzer-pharma.onrender.com",g=async()=>{p(!0);try{const r=new URLSearchParams({page:o,limit:i,...s&&{startDate:s},...n&&{searchQuery:n}}),u=await(await fetch(`${y}/admin/getallpendingorders?${r.toString()}`,{credentials:"include"})).json();b(u.orders||[]),P(u.totalCount||0)}catch(r){console.error("Error fetching pending orders:",r)}finally{p(!1)}};t.useEffect(()=>{g()},[o,i,s,n]),t.useEffect(()=>(m.on("orderUpdated",()=>{g()}),()=>{m.off("orderUpdated")}),[]);const D=(r,h)=>{l(h)},E=r=>{S(parseInt(r.target.value,10)),l(0)},L=r=>{d(r),c(!0)},N=()=>{c(!1),d(null)},R=[{id:"order_id",label:"Order ID"},{id:"Distributor",label:"Distributor"},{id:"order_date",label:"Order Date"},{id:"",label:"Update Order"}];return e.jsxs("div",{className:"table",children:[e.jsxs("div",{className:"table-filter",children:[e.jsx("input",{type:"date",value:s,onChange:r=>v(r.target.value)}),e.jsx("input",{type:"text",placeholder:"Search By Id or Distributor",value:n,onChange:r=>T(r.target.value)})]}),w?e.jsx(k,{order:O,onBack:N}):e.jsx(e.Fragment,{children:C?e.jsx(_,{message:"Loading Pending Orders..."}):e.jsxs(B,{component:U,className:"table-container",children:[e.jsxs(I,{"aria-label":"orders table",children:[e.jsx(A,{children:e.jsx(x,{children:R.map(r=>e.jsx(a,{align:"center",children:r.label},r.id))})}),e.jsx(F,{children:j.map(r=>e.jsxs(x,{children:[e.jsx(a,{align:"center",className:"id-cell",children:r.order_id}),e.jsx(a,{align:"center",children:r.Distributor}),e.jsx(a,{align:"center",children:new Date(r.order_date).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0})}),e.jsx(a,{align:"center",onClick:()=>L(r),children:e.jsx("span",{className:"approve-order-cell",children:"approve order"})})]},r.order_id))})]}),e.jsx(Q,{component:"div",count:f,page:o,onPageChange:D,rowsPerPage:i,onRowsPerPageChange:E,rowsPerPageOptions:[5,10,25,50]})]})})]})},ee=()=>e.jsxs("div",{className:"page",children:[e.jsx("div",{className:"page-title",children:"Pending Orders"}),e.jsx(V,{})]});export{ee as default};
