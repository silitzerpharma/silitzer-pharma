import{h as j,o as b,r,j as e,aK as v,aL as w,aM as y}from"./index-DlcvTWOH.js";import{S as k}from"./Snackbar-z76ToobN.js";import{A as N}from"./Alert-D_RgXu2Q.js";import"./IconButton-eRt6TsSc.js";const C="https://silitzer-pharma.onrender.com",E=()=>{const m=j(),c=b(n=>n.user.user),l=r.useRef(),u=r.useRef(),[f,s]=r.useState(!1),[x,a]=r.useState(""),[S,t]=r.useState("error");if(c)return e.jsx(v,{to:`/${c.role.toLowerCase()}`});const g=async n=>{n.preventDefault();const o=l.current.value,d=u.current.value;if(!o||!d){a("Please enter both username and password"),t("warning"),s(!0);return}try{const i=await fetch(`${C}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:o,password:d})}),h=await i.json();i.ok?(a("Signin successful!"),t("success"),s(!0),m(y(h.user))):(a(h.message||"Login failed"),t("error"),s(!0))}catch(i){console.error("Error during fetch:",i),a("Network error or server not responding."),t("error"),s(!0)}},p=(n,o)=>{o!=="clickaway"&&s(!1)};return e.jsxs("div",{className:"login-Container",children:[e.jsx("div",{className:"pharma-login-wrapper",children:e.jsxs("div",{className:"pharma-login-box",children:[e.jsxs("h1",{className:"pharma-title",children:[e.jsx(w,{})," Silitzer-Pharma"]}),e.jsx("p",{className:"pharma-subtitle",children:"Committed to Wellness"}),e.jsxs("form",{onSubmit:g,children:[e.jsx("input",{type:"text",placeholder:"Username",className:"pharma-input",ref:l}),e.jsx("input",{type:"password",placeholder:"Password",className:"pharma-input",ref:u}),e.jsx("button",{className:"pharma-button",children:"Login"})]})]})}),e.jsx(k,{open:f,autoHideDuration:3e3,onClose:p,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(N,{onClose:p,severity:S,sx:{width:"100%"},children:x})})]})};export{E as default};
