import{r as s,j as e}from"./index-DlcvTWOH.js";import{P as y}from"./ProductDetailCard-BY6K1KLT.js";const b="https://silitzer-pharma.onrender.com",f=10,P=()=>{const[r,x]=s.useState(""),[n,i]=s.useState(null),[c,h]=s.useState([]),[g,p]=s.useState(!0),[d,l]=s.useState(1),[a,u]=s.useState(1),m=async()=>{try{p(!0);const o=await(await fetch(`${b}/employee/products?page=${d}&limit=${f}&search=${encodeURIComponent(r)}`,{method:"GET",credentials:"include"})).json();h(o.products),u(o.totalPages)}catch(t){console.error("Failed to fetch products:",t)}finally{p(!1)}};s.useEffect(()=>{m()},[d,r]);const j=t=>{x(t.target.value),l(1)};return e.jsxs("div",{className:"EmployeeStock",style:{maxWidth:800,margin:"4rem auto",padding:10},children:[!n&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"search",placeholder:"Search by Product Code or Name",value:r,onChange:j,style:{width:"100%",padding:"10px",fontSize:"16px",borderRadius:"6px",border:"1.8px solid #ccc",marginBottom:"20px",boxSizing:"border-box"}}),g?e.jsx("p",{children:"Loading products..."}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{style:{backgroundColor:"#007bff",color:"white"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Product Code"}),e.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Product Name"}),e.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Item Rate"}),e.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Stock"})]})}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"20px"},children:"No products found."})}):c.map(t=>{var o;return e.jsxs("tr",{onClick:()=>i(t),style:{cursor:"pointer",backgroundColor:"transparent"},children:[e.jsx("td",{style:{padding:"10px",borderBottom:"1px solid #ddd"},children:t.productCode}),e.jsx("td",{style:{padding:"10px",borderBottom:"1px solid #ddd"},children:t.productName}),e.jsxs("td",{style:{padding:"10px",borderBottom:"1px solid #ddd",textAlign:"right"},children:["$",((o=t.itemRate)==null?void 0:o.toFixed(2))??"0.00"]}),e.jsx("td",{style:{padding:"10px",borderBottom:"1px solid #ddd",textAlign:"right"},children:t.stock??0})]},t.productCode)})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px"},children:[e.jsx("button",{onClick:()=>l(t=>Math.max(1,t-1)),disabled:d===1,children:"Previous"}),e.jsxs("span",{style:{margin:"0 15px"},children:["Page ",d," of ",a]}),e.jsx("button",{onClick:()=>l(t=>Math.min(a,t+1)),disabled:d===a,children:"Next"})]})]})]}),n&&e.jsx(y,{product:n,onClose:()=>i(null)})]})};export{P as default};
